# kamaCache: åˆ†å¸ƒå¼ç¼“å­˜æ¶æ„ä¸ä½¿ç”¨æŒ‡å— ğŸš€

## 1.0 æ¦‚è¿° ğŸŒŸ

**kamaCache** æ˜¯ä¸€ä¸ª â€œå¼€ç®±å³ç”¨â€ çš„é«˜æ€§èƒ½ã€åˆ†å¸ƒå¼ Go å†…å­˜ç¼“å­˜åº“ã€‚å®ƒå°†å¤æ‚çš„åˆ†å¸ƒå¼é€»è¾‘ï¼ˆå¦‚èŠ‚ç‚¹å‘ç°ã€gRPCé€šä¿¡ã€ä¸€è‡´æ€§å“ˆå¸Œï¼‰å®Œå…¨å°è£…ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªæå…¶ç®€æ´çš„ APIã€‚ä½ åªéœ€å‡ è¡Œä»£ç ï¼Œå°±èƒ½å°†ä½ çš„å•æœºåº”ç”¨ç¼“å­˜æ— ç¼å‡çº§ä¸ºå¼ºå¤§çš„åˆ†å¸ƒå¼ç¼“å­˜é›†ç¾¤ã€‚

**æ ¸å¿ƒç‰¹æ€§:**

*   **âš¡ æè‡´æ˜“ç”¨**: API é«˜åº¦å°è£…ï¼Œè°ƒç”¨ `Get()` å³å¯ï¼Œå®Œå…¨å±è”½åº•å±‚åˆ†å¸ƒå¼ç»†èŠ‚ã€‚
*   **ğŸŒ é«˜æ•ˆé›†ç¾¤**: èŠ‚ç‚¹é—´é€šè¿‡ **gRPC** è¿›è¡Œ P2P é€šä¿¡ï¼Œå®ç°ä½å»¶è¿Ÿã€é«˜ååçš„æ•°æ®äº¤æ¢ã€‚
*   **âš–ï¸ æ™ºèƒ½è·¯ç”±**: å†…ç½®**ä¸€è‡´æ€§å“ˆå¸Œ**ï¼Œè‡ªåŠ¨å°† Key å®šä½åˆ°æœ€ä¼˜èŠ‚ç‚¹ï¼Œå¹¶åœ¨èŠ‚ç‚¹å˜åŒ–æ—¶æœ€å°åŒ–ç¼“å­˜è¿ç§»ã€‚
*   **ğŸ›¡ï¸ è‡ªåŠ¨å®¹é”™**: å»ä¸­å¿ƒåŒ–æ¶æ„ï¼Œæ— å•ç‚¹æ•…éšœã€‚å•ä¸ªèŠ‚ç‚¹å®•æœºï¼Œé›†ç¾¤æœåŠ¡ä¸ä¸­æ–­ï¼Œä»…å½±å“è¯¥èŠ‚ç‚¹æ•°æ®ã€‚
*   **ğŸ—‘ï¸ æ™ºèƒ½æ·˜æ±°**:
    *   **LRU**: å†…ç½®é»˜è®¤çš„ LRU ç­–ç•¥ï¼Œé«˜æ•ˆç®¡ç†å†…å­˜ã€‚
    *   **2Q ç®—æ³•**: æä¾›å¯é€‰çš„ 2Q ç­–ç•¥ï¼Œèƒ½æœ‰æ•ˆé˜²æ­¢æ‰¹é‡æ•°æ®è®¿é—®é€ æˆçš„â€œç¼“å­˜æ±¡æŸ“â€ï¼Œæé«˜å¤æ‚åœºæ™¯ä¸‹çš„å‘½ä¸­ç‡ã€‚
*   **ğŸ”§ çµæ´»å¯é…**: æ”¯æŒ**å¯æ’æ‹”çš„å“ˆå¸Œå‡½æ•°**ï¼ˆå¦‚ Murmur3, CRC32ï¼‰ï¼Œå…è®¸ç”¨æˆ·æ ¹æ®ä¸šåŠ¡åœºæ™¯è¿›è¡Œæ€§èƒ½å¾®è°ƒã€‚

## 2.0 æ¶æ„ä¸è°ƒç”¨æµç¨‹ ğŸ›ï¸

å°½ç®¡å®ç°ç»†èŠ‚è¢«å°è£…ï¼Œä½†ç†è§£å…¶é«˜å±‚å·¥ä½œåŸç†æœ‰åŠ©äºä½ æ›´å¥½åœ°ä½¿ç”¨å®ƒã€‚

### 2.1 ğŸ  å•å®ä¾‹æ¨¡å¼

å½“ä½ çš„åº”ç”¨åªå¯åŠ¨ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼ŒkamaCache ä¼šè‡ªåŠ¨ä»¥å•å®ä¾‹æ¨¡å¼è¿è¡Œï¼Œæ‰€æœ‰æ“ä½œéƒ½åœ¨æœ¬åœ°å†…å­˜å®Œæˆï¼Œæ— ä»»ä½•ç½‘ç»œå¼€é”€ã€‚

**è°ƒç”¨æµç¨‹å›¾:**
```mermaid
graph TD
    subgraph "kamaCache å•å®ä¾‹éƒ¨ç½²"
    A[ğŸ’» åº”ç”¨ç¨‹åº] -->|Get my_key| B{ğŸ§± ç¼“å­˜ç»„}
        B -->|1ï¸âƒ£ ç¼“å­˜æŸ¥è¯¢| C[ğŸ“¦ æœ¬åœ°ç¼“å­˜]
        C -->|âœ… å‘½ä¸­| D[è¿”å›å€¼]
        C -->|âŒ æœªå‘½ä¸­| E{2ï¸âƒ£ æ‰§è¡Œ Getter}
        E -->|3ï¸âƒ£ å†™å…¥ç¼“å­˜| C
        E --> D
    end

    subgraph "å¤–éƒ¨æ•°æ®æº"
        F[ğŸ—„ï¸ æ•°æ®åº“/API]
    end

    E -->|è®¿é—®æ•°æ®æº| F
    F --> E

    D -->|å“åº”| A

```

### 2.2 ğŸŒ åˆ†å¸ƒå¼é›†ç¾¤æ¨¡å¼

å½“ä½ å¯åŠ¨å¤šä¸ªé…ç½®äº†ç›¸åŒå¯¹ç­‰èŠ‚ç‚¹åˆ—è¡¨çš„å®ä¾‹æ—¶ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨ç»„æˆä¸€ä¸ªé›†ç¾¤ã€‚**æ‰€æœ‰å¤æ‚çš„ gRPC é€šä¿¡å’ŒèŠ‚ç‚¹æŸ¥æ‰¾éƒ½åœ¨åº“å†…éƒ¨è‡ªåŠ¨å®Œæˆ**ã€‚

#### **Get(key) è¯»å–æµç¨‹**

å¯¹ä½ çš„åº”ç”¨ä»£ç æ¥è¯´ï¼Œè°ƒç”¨æ–¹å¼ä¸å•å®ä¾‹æ¨¡å¼**å®Œå…¨ä¸€æ ·**ï¼Œä½†å…¶å†…éƒ¨çš„è°ƒç”¨æµç¨‹å´å¤§ä¸ç›¸åŒã€‚

1.  ä½ çš„åº”ç”¨åœ¨**èŠ‚ç‚¹A**ä¸Šè°ƒç”¨ `group.Get("some_key")`ã€‚
2.  kamaCache **ä¼˜å…ˆæ£€æŸ¥èŠ‚ç‚¹Açš„æœ¬åœ°ç¼“å­˜**ã€‚å¦‚æœå‘½ä¸­ï¼Œç«‹å³è¿”å›ã€‚
3.  å¦‚æœæœ¬åœ°æœªå‘½ä¸­ï¼ŒkamaCache ä¼š**è‡ªåŠ¨æŸ¥è¯¢å†…ç½®çš„ä¸€è‡´æ€§å“ˆå¸Œç¯**ã€‚
4.  **æƒ…å†µä¸€ï¼šå“ˆå¸Œç¯æŒ‡ç¤º `some_key` å°±åº”è¯¥å­˜æ”¾åœ¨èŠ‚ç‚¹A**ã€‚åº“ä¼šè‡ªåŠ¨è°ƒç”¨ä½ æä¾›çš„ `Getter` ä»æ•°æ®åº“åŠ è½½æ•°æ®ï¼Œå­˜å…¥èŠ‚ç‚¹Açš„æœ¬åœ°ç¼“å­˜åè¿”å›ã€‚
5.  **æƒ…å†µäºŒï¼šå“ˆå¸Œç¯æŒ‡ç¤º `some_key` å­˜æ”¾åœ¨è¿œç¨‹çš„èŠ‚ç‚¹B**ã€‚kamaCache ä¼š**è‡ªåŠ¨å‘èŠ‚ç‚¹Bå‘èµ·ä¸€ä¸ªå†…éƒ¨çš„ gRPC è¯·æ±‚**ï¼Œè·å–æ•°æ®åè¿”å›ç»™ä½ çš„åº”ç”¨ã€‚

**è°ƒç”¨æµç¨‹å›¾:**
```mermaid
graph TD
    Client[ğŸ’» åº”ç”¨ @ èŠ‚ç‚¹A] -- Get(key) --> GA{ğŸ—ƒï¸ Group @ èŠ‚ç‚¹A}
  
     subgraph "kamaCache"
        GA -- ä¼˜å…ˆæŸ¥æœ¬åœ° --> CA[ğŸ—‘ï¸ LRU @ A]
        CA -- âœ… æœ¬åœ°å‘½ä¸­ --> Client
        CA -- âŒ æœ¬åœ°æœªå‘½ä¸­ --> Pick{å†…éƒ¨æŸ¥è¯¢<br>ä¸€è‡´æ€§å“ˆå¸Œç¯}
        Pick -- è´Ÿè´£äººæ˜¯è‡ªå·± --> Load(å†…éƒ¨è°ƒç”¨ Getter<br>ä» DB åŠ è½½)
        Load -- è¿”å›å€¼ --> Client
        Pick -- è´Ÿè´£äººæ˜¯èŠ‚ç‚¹B --> gRPCClient(å†…éƒ¨å‘èµ·<br>ğŸ“ gRPC è¯·æ±‚)
    end

    subgraph èŠ‚ç‚¹B
        gRPCServer[ğŸ“¡ å†…éƒ¨ gRPC æœåŠ¡ @ B]
    end

    gRPCClient --> gRPCServer
    gRPCServer --> gRPCClient
    gRPCClient -- è¿”å›å€¼ --> Client
```

#### **Set(key, value) å†™å…¥æµç¨‹**

ä¸è¯»å–æµç¨‹ä¸€æ ·ï¼Œ`Set` æ–¹æ³•ä¹Ÿä¼šè‡ªåŠ¨å°†æ•°æ®å†™å…¥æ­£ç¡®çš„èŠ‚ç‚¹ã€‚

1.  ä½ çš„åº”ç”¨åœ¨**èŠ‚ç‚¹A**ä¸Šè°ƒç”¨ `group.Set("some_key", "value")`ã€‚
2.  kamaCache **è‡ªåŠ¨æŸ¥è¯¢ä¸€è‡´æ€§å“ˆå¸Œç¯**ï¼Œå®šä½åˆ°è´Ÿè´£ `some_key` çš„èŠ‚ç‚¹ï¼ˆå¯èƒ½æ˜¯èŠ‚ç‚¹Aè‡ªå·±ï¼Œä¹Ÿå¯èƒ½æ˜¯è¿œç¨‹çš„èŠ‚ç‚¹Bï¼‰ã€‚
3.  åº“**è‡ªåŠ¨å°†æ•°æ®**é€šè¿‡å†…å­˜å†™å…¥æˆ–å†…éƒ¨ gRPC è¯·æ±‚ï¼Œ**å­˜æ”¾åˆ°æ­£ç¡®çš„èŠ‚ç‚¹**ä¸Šã€‚

> âœ¨ **æ ¸å¿ƒä»·å€¼**: ä½ çš„ä¸šåŠ¡ä»£ç æ— éœ€å…³å¿ƒæ•°æ®åˆ°åº•å­˜åœ¨å“ªä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿæ— éœ€æ‰‹åŠ¨ç¼–å†™ä»»ä½•ç½‘ç»œé€šä¿¡ä»£ç ã€‚åªéœ€åƒæ“ä½œä¸€ä¸ªæœ¬åœ° Map ä¸€æ ·æ“ä½œ `Group` å¯¹è±¡å³å¯ã€‚

## 3.0 å¿«é€Ÿå¼€å§‹æŒ‡å— ğŸš€

æˆ‘ä»¬å°†å®é™…æ“ä½œï¼Œæ­å»ºä¸€ä¸ªæ”¯æŒå¤š Groupã€å¯åŠ¨æ€åˆ›å»ºã€å¸¦ HTTP æ¥å£çš„æœ¬åœ°ç¼“å­˜æœåŠ¡ã€‚


### âœ… é€‚ç”¨èŒƒå›´

> å½“å‰ç¤ºä¾‹ä»…æ”¯æŒ **æœ¬åœ°è¿è¡Œæ¨¡å¼**ï¼Œä¸ä¾èµ–ç½‘ç»œåˆ†å¸ƒå¼ç¯å¢ƒï¼Œé€‚åˆæœ¬åœ°å¼€å‘è°ƒè¯•ã€‚æœªæ¥ç‰ˆæœ¬å°†æä¾›è‡ªåŠ¨å°è£…çš„åˆ†å¸ƒå¼éƒ¨ç½²æ–¹å¼ã€‚


### **ç¬¬ 1 æ­¥: åˆå§‹åŒ–é¡¹ç›®å¹¶è·å–ä¾èµ–** âœ…

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir my-cluster-app
cd my-cluster-app

# åˆå§‹åŒ– Go Module
go mod init my-cluster-app

# è·å– kamaCache åº“
go get github.com/rson9/kamaCache 
```

### **ç¬¬ 2 æ­¥: ç¼–å†™å¯åŠ¨ä»£ç  (`main.go`)** âœï¸

è¿™æ˜¯ä½ å”¯ä¸€éœ€è¦ç¼–å†™çš„æ–‡ä»¶ã€‚ä½ åªéœ€è¦åšä¸‰ä»¶äº‹ï¼š

1. åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªç¼“å­˜ç»„ (`Group`)ï¼Œå¹¶æä¾›å›æºé€»è¾‘ (`Getter`)ã€‚
2. å¯åŠ¨ HTTP æœåŠ¡ï¼Œæ”¯æŒé€šè¿‡ URL æ“ä½œç¼“å­˜ã€‚
3. è¿è¡ŒæœåŠ¡ï¼Œäº«å—æœ¬åœ°é«˜æ€§èƒ½ç¼“å­˜ã€‚

```go
package main

import (
	"context"
	"fmt"
	"log"
	"net/http"
	"sync"

	kamacache "github.com/rson9/kamaCache/group"
)

// CacheManager æ”¯æŒå¤šä¸ª Groupï¼Œä¸”æ”¯æŒ Set å’Œ Get æ“ä½œ
type CacheManager struct {
	mu     sync.RWMutex
	groups map[string]*kamacache.Group
}

func NewCacheManager() *CacheManager {
	return &CacheManager{
		groups: make(map[string]*kamacache.Group),
	}
}

func (cm *CacheManager) AddGroup(name string, cacheBytes int64, getter kamacache.Getter) error {
	cm.mu.Lock()
	defer cm.mu.Unlock()

	if _, exists := cm.groups[name]; exists {
		return fmt.Errorf("group %s å·²å­˜åœ¨", name)
	}
	group := kamacache.NewGroup(name, cacheBytes, getter)
	cm.groups[name] = group
	log.Printf("æ–°å¢ç¼“å­˜ç»„: %s, ç¼“å­˜å¤§å°: %d å­—èŠ‚", name, cacheBytes)
	return nil
}

func (cm *CacheManager) GetGroup(name string) (*kamacache.Group, bool) {
	cm.mu.RLock()
	defer cm.mu.RUnlock()
	group, ok := cm.groups[name]
	return group, ok
}

func main() {
	cm := NewCacheManager()

	// åˆ›å»ºä¸€ä¸ªç¤ºä¾‹ç¼“å­˜ç»„
	_ = cm.AddGroup("scores", 2<<20, kamacache.GetterFunc(
		func(ctx context.Context, key string) ([]byte, error) {
			log.Printf("[Getter-scores] åŠ è½½ key: %s", key)
			return []byte("score_for_" + key), nil
		}))

	// HTTP æ¥å£æ”¯æŒ GET / SET æ“ä½œ
	http.HandleFunc("/cache", func(w http.ResponseWriter, r *http.Request) {
		groupName := r.URL.Query().Get("group")
		key := r.URL.Query().Get("key")
		op := r.URL.Query().Get("op") // get æˆ– set
		value := r.URL.Query().Get("value")

		group, ok := cm.GetGroup(groupName)
		if !ok {
			http.Error(w, "group ä¸å­˜åœ¨", http.StatusBadRequest)
			return
		}

		switch op {
		case "get":
			view, ok := group.Get(context.Background(), key)
			if !ok {
				http.Error(w, "key æœªå‘½ä¸­æˆ–åŠ è½½å¤±è´¥", http.StatusNotFound)
				return
			}
			w.Header().Set("Content-Type", "application/octet-stream")
			w.Write(view.ByteSlice())
		case "set":
			err := group.Set(context.Background(), key, []byte(value))
			if err != nil {
				http.Error(w, "Set å¤±è´¥: "+err.Error(), http.StatusInternalServerError)
				return
			}
			fmt.Fprintf(w, "Set æˆåŠŸï¼Œkey=%s, value=%s\n", key, value)
		default:
			http.Error(w, "ä¸æ”¯æŒçš„æ“ä½œï¼Œè¯·ä½¿ç”¨ op=get æˆ– op=set", http.StatusBadRequest)
		}
	})

	log.Println("ğŸŸ¢ æœ¬åœ°ç¼“å­˜æœåŠ¡å¯åŠ¨æˆåŠŸï¼Œç›‘å¬åœ°å€: http://localhost:9999")
	log.Fatal(http.ListenAndServe(":9999", nil))
}
```


### **ç¬¬ 3 æ­¥: è¿è¡ŒæœåŠ¡å¹¶éªŒè¯** ğŸ’¨

```bash
go run main.go
```


### **ç¬¬ 4 æ­¥: ä½¿ç”¨ curl éªŒè¯ç¼“å­˜æ“ä½œ** ğŸ§ª

#### âœ… è®¾ç½®ä¸€ä¸ªç¼“å­˜å€¼

```bash
curl "http://localhost:9999/cache?group=scores&op=set&key=Tom&value=700"
```
> âœ… è¾“å‡º: `Set æˆåŠŸï¼Œkey=Tom, value=700`


#### âœ… è¯»å–ä¸€ä¸ªç¼“å­˜å€¼

```bash
curl "http://localhost:9999/cache?group=scores&op=get&key=Tom"
```
> âœ… è¾“å‡º: `700`


#### âœ… æµ‹è¯•è‡ªåŠ¨å›æº Getter

```bash
curl "http://localhost:9999/cache?group=scores&op=get&key=Jerry"
```

> âœ… è¾“å‡º: `score_for_Jerry`ï¼ˆå‘½ä¸­ getterï¼‰


### ğŸ“¦ å½“å‰è¿è¡Œæ¨¡å¼è¯´æ˜

* æœ¬ç¤ºä¾‹è¿è¡Œåœ¨ **æœ¬åœ°ç¼“å­˜æ¨¡å¼**
* é€‚ç”¨äºå­¦ä¹ ã€å¼€å‘å’Œè°ƒè¯•åœºæ™¯
* åç»­å°†æ‰©å±•æ”¯æŒ **Etcd æ³¨å†Œ**ã€**å¤šèŠ‚ç‚¹éƒ¨ç½²**ã€**è‡ªåŠ¨æœåŠ¡å‘ç°**


## 4.0 éƒ¨ç½²ä¸æœ€ä½³å®è·µ ğŸ’¡

*   **å®¹å™¨åŒ–**: å¼ºçƒˆå»ºè®®ä½¿ç”¨ Docker å°†åº”ç”¨æ‰“åŒ…ï¼Œå¹¶é€šè¿‡ Kubernetes æˆ– Docker Compose è¿›è¡Œéƒ¨ç½²å’Œç®¡ç†ã€‚
*   **æœåŠ¡å‘ç°**: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåº”é€šè¿‡é…ç½®ä¸­å¿ƒï¼ˆå¦‚ Nacos, Etcdï¼‰æˆ–K8sçš„æœåŠ¡å‘ç°æœºåˆ¶æ¥åŠ¨æ€ç®¡ç† `peers` åˆ—è¡¨ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç ã€‚
*   **ç½‘ç»œ**: å°†æ‰€æœ‰ç¼“å­˜èŠ‚ç‚¹éƒ¨ç½²åœ¨åŒä¸€ä¸ªä½å»¶è¿Ÿçš„å†…ç½‘ç¯å¢ƒï¼ˆå¦‚ AWS VPC æˆ–é˜¿é‡Œäº‘ VPCï¼‰ä¸­ï¼Œä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚
*   **ç›‘æ§**: ç›‘æ§èŠ‚ç‚¹çš„ CPUã€å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä»¥åŠç¼“å­˜çš„å‘½ä¸­ç‡ã€Get/Set æ¬¡æ•°ç­‰å…³é”®æŒ‡æ ‡ã€‚

## 5.0 å½“å‰åŠŸèƒ½æ¦‚è§ˆä¸è·¯çº¿å›¾ğŸ“˜ 

### âœ… å·²å®ç°åŠŸèƒ½

| æ¨¡å—                          | æè¿°                                           |
| --------------------------- | -------------------------------------------- |
| ğŸ§  **æœ¬åœ°ç¼“å­˜ (Local Cache)**   | æä¾›çº¯å†…å­˜é«˜æ€§èƒ½ç¼“å­˜ï¼Œæ”¯æŒ LRU ä¸ LRU2 æ›¿æ¢ç­–ç•¥ï¼Œçµæ´»è®¾ç½®å®¹é‡         |
| ğŸ” **å¤šç§ LRU ç®—æ³•å®ç°**          | æ”¯æŒæ ‡å‡† LRUã€TwoQueue (LRU2)ã€Clock-LRU ç­‰å®ç°ï¼Œå¯è‡ªç”±æ‰©å±• |
| ğŸ§° **å¤šç¼“å­˜ç»„æ”¯æŒ (Multi-Group)** | æ”¯æŒä¸€ä¸ªæœåŠ¡ä¸­åˆ›å»ºå¤šä¸ªç¼“å­˜ Groupï¼Œç¼“å­˜ç©ºé—´éš”ç¦»ï¼Œæ”¯æŒåŠ¨æ€æ³¨å†Œã€è¿è¡Œæ—¶åˆ›å»º      |
| ğŸª¢ **åˆ†å¸ƒå¼èŠ‚ç‚¹é€šä¿¡**              | ä½¿ç”¨ gRPC å®ç°é«˜æ€§èƒ½å¯¹ç­‰èŠ‚ç‚¹é€šä¿¡ï¼Œæ”¯æŒè¿œç¨‹æ‹‰å– / å›æº / è·¯ç”±         |
| ğŸŒ **ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•**              | å†…ç½®ä¸€è‡´æ€§å“ˆå¸Œï¼ˆæ”¯æŒå¤šä¸ª hash å‡½æ•°ï¼‰ï¼Œå®ç°åˆ†å¸ƒå¼æ•°æ®è´Ÿè½½å‡è¡¡ï¼Œæ”¯æŒè™šæ‹ŸèŠ‚ç‚¹æ•°é…ç½®  |
| ğŸ“¡ **æœåŠ¡å‘ç°ä¸æ³¨å†Œ (Etcd)**       | å¯é€‰é›†æˆ Etcdï¼Œè‡ªåŠ¨æ³¨å†ŒæœåŠ¡å¹¶å‘ç°å…¶å®ƒèŠ‚ç‚¹ï¼Œæ”¯æŒç”¨æˆ·å/å¯†ç ã€è¿æ¥è¶…æ—¶ç­‰é…ç½®     |
| ğŸ“ˆ **ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯**               | æ¯ä¸ª Group æ”¯æŒç¼“å­˜å‘½ä¸­ç‡ã€æ·˜æ±°æ¬¡æ•°ã€å›æºæ¬¡æ•°ã€è¿œç¨‹è¯·æ±‚ç­‰è¯¦ç»†æŒ‡æ ‡è¾“å‡º       |


### ğŸš§ è§„åˆ’ä¸­åŠŸèƒ½ï¼ˆå¼€å‘ä¸­ / æ’æœŸä¸­ï¼‰

| æ¨¡å—                          | æè¿°                                                                  |
| --------------------------- | ------------------------------------------------------------------- |
| ğŸ§© **æœåŠ¡å°è£…ç®€åŒ– (Builder API)** | æä¾›ç»Ÿä¸€å¯åŠ¨å‡½æ•°ï¼ˆå¦‚ `StartServerWithGroups`ï¼‰ï¼Œè‡ªåŠ¨å®Œæˆ Group æ³¨å†Œã€Peer Picker é…ç½®ç­‰é€»è¾‘ |
| ğŸ›ï¸ **é…ç½®å‹å¥½åŒ– (YAML/TOML)**   | æä¾› YAML / JSON / TOML é…ç½®æ–‡ä»¶åŠ è½½ï¼Œé™ä½éƒ¨ç½²é—¨æ§›ï¼Œæ”¯æŒé…ç½®ç¼“å­˜ç­–ç•¥ã€ç»„å®šä¹‰ã€etcd å‚æ•°ç­‰           |
| ğŸ§­ **åŠ¨æ€ç­–ç•¥çƒ­æ›´æ–°**              | æ”¯æŒè¿è¡Œæ—¶ä¿®æ”¹ Group ç­–ç•¥ï¼ˆå¦‚ LRU -> LRU2ï¼‰ï¼Œç¼“å­˜ç­–ç•¥æ›´çµæ´»                             |
| â˜ï¸ **å®¹å™¨åŒ–éƒ¨ç½²ä¸ K8s æ”¯æŒ**        | æä¾›å®˜æ–¹ Dockerfile ä¸ Helm Chartï¼Œå¿«é€Ÿéƒ¨ç½²è‡³ç”Ÿäº§ç¯å¢ƒ                              |
| ğŸ” **æƒé™æ§åˆ¶ä¸è®¤è¯æœºåˆ¶**            | æ”¯æŒ HTTP/gRPC è®¤è¯é‰´æƒï¼Œä¿éšœåˆ†å¸ƒå¼é€šä¿¡å®‰å…¨                                         |
| ğŸ§ª **æ’ä»¶å¼æ‰©å±•ç‚¹**               | ç”¨æˆ·å¯æ³¨å…¥è‡ªå®šä¹‰æ·˜æ±°ç­–ç•¥ã€Hash ç®—æ³•ã€å‹ç¼©ã€åºåˆ—åŒ–å™¨ç­‰ï¼Œæå‡ç³»ç»Ÿå¯æ‰©å±•æ€§                              |
| ğŸ› ï¸ **æ§åˆ¶é¢ CLI / Dashboard** | æä¾›å‘½ä»¤è¡Œå’Œ Web UI ç”¨äºå®æ—¶æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€ã€ç¼“å­˜çŠ¶æ€ã€é…ç½®ç®¡ç†ç­‰                                 |
| ğŸ“¦ **å¤šçº§ç¼“å­˜ç»“æ„**               | æ”¯æŒæœ¬åœ° L1 ç¼“å­˜ + è¿œç¨‹ L2 åˆ†å¸ƒå¼ç¼“å­˜ + å›æº L3ï¼ˆæ•°æ®åº“ï¼‰çš„å®Œæ•´é“¾è·¯                          |


### ğŸ“£ æˆ‘ä»¬æ¬¢è¿åé¦ˆï¼

å¦‚æœä½ ï¼š

* é‡åˆ°é—®é¢˜ â—
* æœ‰æƒ³æ³• ğŸ’¡
* æƒ³ä¸€èµ·å‚ä¸å¼€å‘ ğŸ› ï¸

æ¬¢è¿åˆ›å»º Issueã€PR æˆ–é‚®ä»¶è”ç³»æˆ‘ä»¬ï¼

ğŸ“ GitHub: [https://github.com/rson9/kamaCache](https://github.com/rson9/kamaCache)
ğŸ“§ Email: *[1302018451@qq.com](mailto:1302018451@qq.com)*
